!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.slgfx=t():e.slgfx=t()}(this,(function(){return(()=>{"use strict";var e={543:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;t.Event=function(e,t,i){this.type=e,this.data=t,this.time=i||Date.now()}},734:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;var n=i(543),o=function(){function e(){this._eventManagerId=e.EventManagerId++,this._eventManagerListenerId=0,this._eventListeners={},this.on=this.addEventListener}return e.prototype.addEventListener=function(e,t,i){var n=i||"eventListener_"+this._eventManagerId+"."+this._eventManagerListenerId;return this._eventManagerListenerId++,this._eventListeners[e]||this.registerEventType(e),this._eventListeners[e][n]=t,n},e.prototype.registerEventType=function(e){this._eventListeners[e]=this._eventListeners[e]||{}},e.prototype.removeEventListener=function(e){var t=this;Object.keys(this._eventListeners).forEach((function(i){t._eventListeners[i][e]&&delete t._eventListeners[i][e]}))},e.prototype.clearEventListeners=function(e){this._eventListeners[e]={}},e.prototype.notify=function(e,t,i){var o;if(o=e instanceof n.Event?e:new n.Event(e,t,i),this._eventListeners[o.type])for(var r in this._eventListeners[o.type])this._eventListeners[o.type][r](o)},e.EventManagerId=0,e}();t.EventManager=o},724:function(e,t){var i=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=void 0;var n=function(){function e(){this._heapSize=0,this._a=[],this._invertPriority=!1,this._maxHeapify=function(e,t,i){var n=0,o=2*e+1,r=2*e+2;void 0===i&&(i=this.invertPriority?-1:1),n=o<t&&this._a[o].compareTo(this._a[e])===i?o:e,r<t&&this._a[r].compareTo(this._a[n])===i&&(n=r),n!=e&&(this._swap(e,n),this._maxHeapify(n,t,i))}}return e.prototype.setInvertPriority=function(e){this._invertPriority=e,this._sort()},Object.defineProperty(e.prototype,"invertPriority",{get:function(){return this._invertPriority},set:function(e){this._invertPriority=e,this._sort()},enumerable:!1,configurable:!0}),e.prototype._sort=function(){this._buildMaxHeap();for(var e=this._heapSize-1;e>=1;e--)this._swap(0,e),this._maxHeapify(0,this._heapSize-(this._heapSize-e))},e.prototype.toSortedArray=function(){return this._sort(),i([],this._a,!0)},e.prototype._swap=function(e,t){var i=this._a[e];this._a[e]=this._a[t],this._a[t]=i},e.prototype._buildMaxHeap=function(){for(var e=Math.floor((this._heapSize-1)/2);e>=0;e--)this._maxHeapify(e,this._heapSize)},e.prototype.extractMax=function(){if(this._heapSize<1)return null;var e=this._a[0];return this._a[0]=this._a[this._heapSize-1],this._heapSize--,this._maxHeapify(0,this._heapSize,this._invertPriority?1:-1),e},e.prototype.insert=function(e){var t=this._heapSize;this._heapSize===this._a.length?this._a.push(e):this._a[t]=e,this._heapSize++,this._increaseKey(t)},e.prototype._increaseKey=function(e){for(;e>0&&this._a[this._parent(e)].compareTo(this._a[e])===(this.invertPriority?-1:1);)this._swap(e,this._parent(e)),e=this._parent(e)},e.prototype.updateElement=function(e){var t=this._a.indexOf(e);this._increaseKey(t)},e.prototype.getByIndex=function(e){if(e>this._heapSize||e<0)throw new Error("Index out of bounds: "+e+". (queue size:"+this._heapSize+")");return this._a[e]},e.prototype.filter=function(e){return this._a.filter(e)},e.prototype.size=function(){return this._heapSize},Object.defineProperty(e.prototype,"length",{get:function(){return this._heapSize},enumerable:!1,configurable:!0}),e.prototype.contains=function(e){for(var t=0;t<this._heapSize;t++)if(e.equals(this._a[t]))return!0;return!1},e.prototype.indexOf=function(e){for(var t=0;t<this._heapSize;t++)if(e.equals(this._a[t]))return t;return-1},e.prototype.remove=function(e){if(!(this._heapSize<1)){var t=this.indexOf(e);t<0||(this._a[t]=this._a[this._heapSize-1],this._heapSize--,this._maxHeapify(t,this._heapSize,this._invertPriority?1:-1))}},e.prototype.clear=function(){this._heapSize=0,this._a=[]},e.prototype._parent=function(e){return Math.floor((e-1)/2)},e.prototype.pop=function(){return this.extractMax()},e.prototype.poll=function(){return this.extractMax()},e.prototype.push=function(e){this.insert(e)},e.prototype.peek=function(){return this._heapSize<1?null:this._a[0]},e}();t.PriorityQueue=n},971:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringToWordTokens=t.omitSpecialCharacters=void 0,t.omitSpecialCharacters=["\\!","@","#","\\$","%","\\^","&","\\*","\\(","\\)","_","=","\\+",",","\\.","<",">","/","\\\\","\\?","\\[","\\]","\\{","\\}","\\|","`","\\~",'"',";",":"],t.StringToWordTokens=function(e,t){return e&&0!==e.length?(t&&t.forEach((function(t){e=e.replace(new RegExp(t,"g")," ")})),e.match(/(\S+)/g)):[]}},153:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.UniquePriorityQueue=void 0;var r=i(724),s=i(629),a=function(e){function t(){var t=e.call(this)||this;return t._entryKeys={},t}return o(t,e),t.prototype.insert=function(e){this._entryKeys[e.getKey()]||(this._entryKeys[e.getKey()]=!0,r.PriorityQueue.prototype.insert.call(this,e))},t.prototype.clear=function(){this._entryKeys={},r.PriorityQueue.prototype.clear.call(this)},t.prototype.extractMax=function(){var e=r.PriorityQueue.prototype.extractMax.call(this);return e&&s.Utils.isFunction(e.getKey)&&this._entryKeys[e.getKey()]&&delete this._entryKeys[e.getKey()],e},t.prototype.contains=function(e){return!0===this._entryKeys[e.getKey()]},t.prototype.remove=function(e){r.PriorityQueue.prototype.remove.call(this,e),this._entryKeys[e.getKey()]&&delete this._entryKeys[e.getKey()]},t.prototype.pop=function(){return this.extractMax()},t.prototype.poll=function(){return this.extractMax()},t.prototype.push=function(e){this.insert(e)},t}(r.PriorityQueue);t.UniquePriorityQueue=a},629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var i=function(){function e(){}return e.isFunction=function(e){return"function"==typeof e},e.isNullOrUndefined=function(e){return null==e},e.degreesToRadians=function(e){return e/180*Math.PI},e.checkCollision=function(e,t,i,n,o,r,s,a){return e<o+s&&e+i>o&&t<r+a&&t+n>r},e}();t.Utils=i},57:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=t.UniquePriorityQueue=t.omitSpecialCharacters=t.StringToWordTokens=t.PriorityQueue=t.EventManager=t.Event=void 0;var n=i(543);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return n.Event}});var o=i(734);Object.defineProperty(t,"EventManager",{enumerable:!0,get:function(){return o.EventManager}});var r=i(724);Object.defineProperty(t,"PriorityQueue",{enumerable:!0,get:function(){return r.PriorityQueue}});var s=i(971);Object.defineProperty(t,"StringToWordTokens",{enumerable:!0,get:function(){return s.StringToWordTokens}}),Object.defineProperty(t,"omitSpecialCharacters",{enumerable:!0,get:function(){return s.omitSpecialCharacters}});var a=i(153);Object.defineProperty(t,"UniquePriorityQueue",{enumerable:!0,get:function(){return a.UniquePriorityQueue}});var h=i(629);Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return h.Utils}})},493:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundLayer=void 0;var r=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.update=function(e,t){var i;for(i=0;i<this._elements.length;i++)this.isDirty()&&this._elements[i].setDirty(!0),this._elements[i].update(e,t)&&this._dirtyElements.push(this._elements[i].getZIndexComparable())},t}(i(531).GfxLayer);t.BackgroundLayer=r},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasContextWrapper=void 0;var i=function(){function e(e){this._width=e.width,this._height=e.height,this._canvasContext=e.canvasContext,this._viewOriginX=e.viewOriginX||0,this._viewOriginY=e.viewOriginY||0,this.setImageSmoothingEnabled(e.imageSmoothingEnabled||!1)}return Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvasContext.canvas},enumerable:!1,configurable:!0}),e.prototype.getViewOriginX=function(){return this._viewOriginX},e.prototype.getViewOriginY=function(){return this._viewOriginY},e.prototype.setViewOriginX=function(e){this._viewOriginX=e},e.prototype.setViewOriginY=function(e){this._viewOriginY=e},e.prototype.getCanvasContext=function(){return this._canvasContext},e.prototype.isImageSmoothingEnabled=function(){return this._canvasContext.imageSmoothingEnabled},e.prototype.setImageSmoothingEnabled=function(e){this._canvasContext.imageSmoothingEnabled=e},e.prototype.clearRect=function(e,t,i,n){this.isOutOfView(e,t,i,n)||this._canvasContext.clearRect(e+this._viewOriginX,t+this._viewOriginY,i,n)},e.prototype.clear=function(){this._canvasContext.clearRect(0,0,this._width,this._height)},e.prototype.fillRect=function(e,t,i,n){this.isOutOfView(e,t,i,n)||this._canvasContext.fillRect(e+this._viewOriginX,t+this._viewOriginY,i,n)},e.prototype.drawImage=function(e,t,i,n,o,r,s,a,h){this.isOutOfView(r,s,a,h)||this._canvasContext.drawImage(e,t,i,n,o,r+this._viewOriginX,s+this._viewOriginY,a,h)},e.prototype.drawImageWithTranslation=function(e,t,i,n,o,r,s,a,h){this._canvasContext.drawImage(e,t,i,n,o,r,s,a,h)},e.prototype.fillRectWithTranslation=function(e,t,i,n){this._canvasContext.fillRect(e,t,i,n)},e.prototype.save=function(){this._canvasContext.save()},e.prototype.restore=function(){this._canvasContext.restore()},e.prototype.translate=function(e,t){this._canvasContext.translate(e+this._viewOriginX,t+this._viewOriginY)},e.prototype.scale=function(e,t){this._canvasContext.scale(e,t)},e.prototype.rotate=function(e){this._canvasContext.rotate(e)},e.prototype.isOutOfView=function(e,t,i,n){return this._viewOriginX+e+i<0||this._viewOriginX+e>this._width||this._viewOriginY+t+n<0||this._viewOriginY+t>this._height},e.prototype.setFillStyle=function(e){this._canvasContext.fillStyle=e},e.prototype.beginPath=function(){this._canvasContext.beginPath()},e.prototype.moveTo=function(e,t){this._canvasContext.moveTo(this._viewOriginX+e,this._viewOriginY+t)},e.prototype.lineTo=function(e,t){this._canvasContext.lineTo(this._viewOriginX+e,this._viewOriginY+t)},e.prototype.closePath=function(){this._canvasContext.closePath()},e.prototype.stroke=function(){this._canvasContext.stroke()},e.prototype.rect=function(e,t,i,n){this._canvasContext.rect(e,t,i,n)},e.prototype.setLineWidth=function(e){this._canvasContext.lineWidth=e},e.prototype.setStrokeStyle=function(e){this._canvasContext.strokeStyle=e},e.prototype.strokeRect=function(e,t,i,n){this._canvasContext.strokeRect(e,t,i,n)},e.prototype.fillText=function(e,t,i,n){this._canvasContext.fillText(e,t,i,n)},e.prototype.strokeText=function(e,t,i,n){this._canvasContext.strokeText(e,t,i,n)},e.prototype.setFontStyle=function(e){this._canvasContext.font=e},e.prototype.setTextAlign=function(e){this._canvasContext.textAlign=e},e.prototype.setTextBaseline=function(e){this._canvasContext.textBaseline=e},e.prototype.setTextDirection=function(e){this._canvasContext.direction=e},e}();t.CanvasContextWrapper=i},555:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=void 0,(i=t.EventType||(t.EventType={})).SCREEN_PAUSED="SCREEN_PAUSED",i.SCREEN_RESUMED="SCREEN_RESUMED",i.BEFORE_RENDER="BEFORE_RENDER",i.AFTER_RENDER="AFTER_RENDER",i.MOUSE_MOVE="MOUSE_MOVE",i.MOUSE_UP="MOUSE_UP",i.MOUSE_DOWN="MOUSE_DOWN",i.ELEMENT_MOVED="ELEMENT_MOVED",i.ELEMENT_STARTED_MOVING="ELEMENT_STARTED_MOVING",i.ELEMENT_STOPPED_MOVING="ELEMENT_STOPPED_MOVING",i.ELEMENT_COLLISION="ELEMENT_COLLISION",i.MOUSE_ENTER_ELEMENT="MOUSE_ENTER_ELEMENT",i.MOUSE_EXIT_ELEMENT="MOUSE_EXIT_ELEMENT",i.MOUSE_MOVE_OVER_ELEMENT="MOUSE_MOVE_OVER_ELEMENT",i.MOUSE_DOWN_ON_ELEMENT="MOUSE_DOWN_ON_ELEMENT",i.MOUSE_UP_ON_ELEMENT="MOUSE_UP_ON_ELEMENT",i.ELEMENT_HIT_LEFT_EDGE="ELEMENT_HIT_LEFT_EDGE",i.ELEMENT_HIT_RIGHT_EDGE="ELEMENT_HIT_RIGHT_EDGE",i.ELEMENT_HIT_TOP_EDGE="ELEMENT_HIT_TOP_EDGE",i.ELEMENT_HIT_BOTTOM_EDGE="ELEMENT_HIT_BOTTOM_EDGE",i.SPRITE_ANIMATION_DONE="SPRITE_ANIMATION_DONE",i.NEXT_FRAME_BEGIN="NEXT_FRAME_BEGIN",i.NEXT_FRAME_END="NEXT_FRAME_END"},388:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GfxElement=void 0;var n=i(57),o=i(833),r=i(555),s=i(163),a=i(438),h=function(){function e(t){this._id=e.id++,this.on=this.addEventListener,this._id=e.id++,this._gfxPanel=t.gfxPanel,this._scaleX=t.scaleX||1,this._scaleY=t.scaleY||1,this._currentMove=null,this._moveQueue=[],this._xMoveRate=0,this._xMoveFractionalAccumulator=0,this._yMoveRate=0,this._yMoveFractionalAccumulator=0,this._dirty=!0,this._hasCollision=!1,this._hadCollisionPreviousFrame=!1,this._hidden=t.hidden||!1,this._x=t.x||0,this._y=t.y||0,this._lastX=0,this._lastY=0,this._mouseIsOver=!1,this._zIndex=t.zIndex||-1,this._zIndexComparable=new s.GfxElementZIndexComparable(this),this._rotation=t.rotation||null,this._baseRotation=t.baseRotation||null,this._wasRotated=!!t.rotation,this._scaledDiagonalSize=0,this._rotatedScaledX=0,this._rotatedScaledY=0,this._lastCollisionBoxX=this._x,this._lastCollisionBoxY=this._y,this._lastCollisionBoxWidth=0,this._lastCollisionBoxHeight=0,this._horizontalFlip=t.horizontalFlip||!1,this._verticalFlip=t.verticalFlip||!1,this._flashDoneCallback=null,this._isFlashing=!1,this._flashStartTime=-1,this._flashDuration=0,this._flashHidden=!1,this._flashElapsed=0,this._flashInterval=0,this._nudgeDoneCallback=null,this._isProcessingNudge=!1,this._shakeDoneCallback=null,this._isProcessingShake=!1,this._eventManager=t.eventManager||new n.EventManager,this._recalculateRotatedCollisionBox()}return e.prototype.addEventListener=function(e,t,i){return this._eventManager.addEventListener(e,t,i)},e.prototype.removeEventListener=function(e){this._eventManager.removeEventListener(e)},e.prototype.clearEventListeners=function(e){this._eventManager.clearEventListeners(e)},e.prototype.notify=function(e,t,i){var o;o=e instanceof n.Event?e:new n.Event(e,t,i),this._eventManager.notify(o),this.getGfxPanel().notify(o)},e.prototype.getId=function(){return this._id},e.prototype.isDirty=function(){return this._dirty||this._hasCollision||this._hadCollisionPreviousFrame},e.prototype.setDirty=function(e){this._dirty=e},e.prototype.isHidden=function(){return this._hidden},e.prototype.setHidden=function(e){this._hidden=e,this._dirty=!0},e.prototype.hasCollision=function(){return this._hasCollision},e.prototype.setHasCollision=function(e){this._hasCollision=e},e.prototype.getZIndex=function(){return this._zIndex},e.prototype.setZIndex=function(e){this._zIndex=e,this.setDirty(!0)},e.prototype.getZIndexComparable=function(){return this._zIndexComparable},e.prototype.getGfxPanel=function(){return this._gfxPanel},e.prototype.getPanelScaleX=function(){return this.getGfxPanel().getScaleX()},e.prototype.getPanelScaleY=function(){return this.getGfxPanel().getScaleY()},e.prototype.getTotalScaleX=function(){return this.getElementScaleX()*this.getGfxPanel().getScaleX()},e.prototype.getTotalScaleY=function(){return this.getElementScaleY()*this.getGfxPanel().getScaleY()},e.prototype.getElementScaleX=function(){return this._scaleX},e.prototype.getElementScaleY=function(){return this._scaleY},e.prototype.setElementScaleX=function(e){this._scaleX=e},e.prototype.setElementScaleY=function(e){this._scaleY=e},e.prototype.getX=function(){return this._x},e.prototype.getScaledX=function(){return this.getX()*this.getPanelScaleX()},e.prototype.getY=function(){return this._y},e.prototype.getScaledY=function(){return this.getY()*this.getPanelScaleY()},e.prototype.setX=function(e){e!==this._x&&this.setDirty(!0),this._x=e},e.prototype.setY=function(e){e!==this._y&&this.setDirty(!0),this._y=e},e.prototype.getLastX=function(){return this._lastX},e.prototype.getLastY=function(){return this._lastY},e.prototype.setLastX=function(e){this._lastX=e},e.prototype.setLastY=function(e){this._lastY=e},e.prototype.isMouseOver=function(){return this._mouseIsOver},e.prototype.getScaledWidth=function(){return this.getWidth()*this.getTotalScaleX()},e.prototype.getScaledHeight=function(){return this.getHeight()*this.getTotalScaleY()},e.prototype.getUnAdjustedRotation=function(){return this._rotation},e.prototype.getBaseRotation=function(){return this._baseRotation},e.prototype.getRotation=function(){return this._rotation||this._baseRotation?(this._rotation||0)+(this._baseRotation||0):null},e.prototype.setRotation=function(e){this._rotation=e,null!==this._rotation?(this._recalculateRotatedCollisionBox(),this.setDirty(!0)):this.wasRotated()&&this.setDirty(!0)},e.prototype.setBaseRotation=function(e){this._baseRotation=e,null!==this._baseRotation?(this._recalculateRotatedCollisionBox(),this.setDirty(!0)):this.wasRotated()&&this.setDirty(!0)},e.prototype.wasRotated=function(){return this._wasRotated},e.prototype.setWasRotated=function(e){this._wasRotated=e},e.prototype.hasRotation=function(){return!(n.Utils.isNullOrUndefined(this.getRotation())||0===this.getRotation())},e.prototype.getRotatedScaledX=function(){return this._rotatedScaledX},e.prototype.getRotatedScaledY=function(){return this._rotatedScaledY},e.prototype.getScaledDiagonalSize=function(){return this._scaledDiagonalSize},e.prototype._recalculateRotatedCollisionBox=function(){null!==this.getRotation()&&(this._scaledDiagonalSize=Math.ceil(Math.sqrt(Math.pow(this.getScaledWidth(),2)+Math.pow(this.getScaledHeight(),2))),this._rotatedScaledX=Math.floor(this.getScaledX()-(this._scaledDiagonalSize-this.getScaledWidth())/2),this._rotatedScaledY=Math.floor(this.getScaledY()-(this._scaledDiagonalSize-this.getScaledHeight())/2))},e.prototype.isHorizontallyFlipped=function(){return this._horizontalFlip},e.prototype.isVerticallyFlipped=function(){return this._verticalFlip},e.prototype.setHorizontallyFlipped=function(e){this._horizontalFlip!==e&&this.setDirty(!0),this._horizontalFlip=e},e.prototype.setVerticallyFlipped=function(e){this._verticalFlip!==e&&this.setDirty(!0),this._verticalFlip=e},e.prototype.flash=function(e,t,i){this._flashInterval=e,this._flashDuration=t,this._isFlashing=!0,this._flashStartTime=-1,this._flashElapsed=0,this._flashHidden=!1,this._flashDoneCallback=i},e.prototype.isFlashing=function(){return this._isFlashing},e.prototype.turnFlashOff=function(){this._endFlash()},e.prototype._endFlash=function(){this._isFlashing=!1,this._flashStartTime=-1,this._flashElapsed=0,this._flashHidden=!1,n.Utils.isFunction(this._flashDoneCallback)&&this._flashDoneCallback()},e.prototype._updateFlash=function(e,t){-1===this._flashStartTime&&(this._flashStartTime=e),e-this._flashStartTime>=this._flashDuration&&this._flashDuration>-1?this._endFlash():(this._flashElapsed+=t,this._flashElapsed>=this._flashInterval&&(this._flashElapsed-=this._flashInterval,this._flashHidden=!this._flashHidden,this.setDirty(!0)))},e.prototype.nudge=function(e,t,i,n,o,r){if(n<0)throw new Error("interval cannot be less than 0");var s,a;this._nudgeDoneCallback=r;for(var h=e>=0?1:-1,l=t>=0?1:-1,u=0;(Math.abs(e)>i||Math.abs(t)>i)&&n>=0;)if(s=this.getX()+e,a=this.getY()+t,this.moveTo(s,a,n),this._isProcessingNudge=!0,n-=o,l*=-1,e=0!==e?(h*=-1)*(Math.abs(e)-i):0,t=0!==t?l*(Math.abs(t)-i):0,++u>1e3)throw new Error("GfxElement.nudge() looped too many times.");this.moveTo(this.getX(),this.getY(),n<0?0:n)},e.prototype.shake=function(e,t,i,n,o,r){if(i<0)throw new Error("interval cannot be less than 0");if(0===n&&!o)throw new Error("must specify either intervalDecay or notToExceedTime");var s,a;this._shakeDoneCallback=r;for(var h=0,l=0,u=e-Math.floor(Math.random()*e*2),p=e-Math.floor(Math.random()*e*2);e>0&&i>0&&l<(o||Number.POSITIVE_INFINITY);)if(s=this.getX()+u,a=this.getY()+p,this.moveTo(s,a,i),this._isProcessingShake=!0,l+=i,i-=n,u=(e-=t)-Math.floor(Math.random()*e*2),p=e-Math.floor(Math.random()*e*2),++h>1e3)throw new Error("GfxElement.shake() looped too many times.");this.moveTo(this.getX(),this.getY(),i<0?0:i)},e.prototype.setMoveRates=function(e,t){0!==e||0!==t||null!==this._currentMove||0===this._xMoveRate&&0===this._yMoveRate?0===e&&0===t||null!==this._currentMove||0!==this._xMoveRate||0!==this._yMoveRate||this.notify(new n.Event(r.EventType.ELEMENT_STARTED_MOVING,{element:this})):this.notify(new n.Event(r.EventType.ELEMENT_STOPPED_MOVING,{element:this})),this._xMoveRate=e,this._yMoveRate=t},e.prototype.getMoveRateX=function(){return this._xMoveRate},e.prototype.getMoveRateY=function(){return this._yMoveRate},e.prototype.moveTo=function(e,t,i,o){i=i||16;var s=new a.MoveOrder(this,e,t,i,this._moveOrderCallback.bind(this),o);this._moveQueue.push(s),null===this._currentMove&&(this._runMove(),0===this.getMoveRateX()&&0===this.getMoveRateY()&&this.notify(new n.Event(r.EventType.ELEMENT_STARTED_MOVING,{element:this})))},e.prototype._runMove=function(){return this._moveQueue.length>0?(this._currentMove=this._moveQueue.shift(),this._currentMove.start(),!0):(0===this.getMoveRateX()&&0===this.getMoveRateY()&&this.notify(new n.Event(r.EventType.ELEMENT_STOPPED_MOVING,{element:this})),this._currentMove=null,!1)},e.prototype._moveOrderCallback=function(){this._currentMove=null,this._runMove()||(this._isProcessingNudge&&(n.Utils.isFunction(this._nudgeDoneCallback)&&this._nudgeDoneCallback(),this._isProcessingNudge=!1),this._isProcessingShake&&(n.Utils.isFunction(this._shakeDoneCallback)&&this._shakeDoneCallback(),this._isProcessingShake=!1))},e.prototype.clearMoveQueue=function(){this._moveQueue=[]},e.prototype.turnOff=function(){this.clearMoveQueue(),this._currentMove=null,this._xMoveRate=0,this._xMoveFractionalAccumulator=0,this._yMoveRate=0,this._yMoveFractionalAccumulator=0,this.hide()},e.prototype.show=function(){this._hidden=!1,this.setDirty(!0)},e.prototype.hide=function(){this._hidden=!0,this.setDirty(!0)},e.prototype.update=function(e,t){return this._updateLocationFromMoveRates(t),this._updateMoveOrder(e,t),this._isFlashing&&this._updateFlash(e,t),this.getX()===this.getLastX()&&this.getY()===this.getLastY()||(this.setDirty(!0),this.notify(new n.Event(r.EventType.ELEMENT_MOVED,{element:this},e))),this.isDirty()?(this._recalculateRotatedCollisionBox(),this):null},e.prototype._updateLocationFromMoveRates=function(e){var t,i,n;0!==this._xMoveRate?(t=this._xMoveFractionalAccumulator+e*this._xMoveRate/1e3,i=Math.sign(t),n=Math.trunc(t),this._xMoveFractionalAccumulator=i*(Math.abs(t)-Math.abs(n)),this._x+=n,this._x!==this._lastX&&this.setDirty(!0)):this._xMoveFractionalAccumulator=0,0!==this._yMoveRate?(t=this._yMoveFractionalAccumulator+e*this._yMoveRate/1e3,i=Math.sign(t),n=Math.trunc(t),this._yMoveFractionalAccumulator=i*(Math.abs(t)-Math.abs(n)),this._y+=n,this._y!==this._lastY&&this.setDirty(!0)):this._yMoveFractionalAccumulator=0},e.prototype._updateMoveOrder=function(e,t){null!==this._currentMove&&(this._currentMove.update(t),this.setDirty(!0))},e.prototype.clear=function(e){e.clearRect(this._lastCollisionBoxX,this._lastCollisionBoxY,this._lastCollisionBoxWidth,this._lastCollisionBoxHeight)},e.prototype.preRender=function(e,t){return!(this.isHidden()||this._flashHidden||!this.isDirty())},e.prototype.postRender=function(e,t){this.setLastX(this.getX()),this.setLastY(this.getY()),this.hasRotation()?this.setWasRotated(!0):this.setWasRotated(!1),this._saveLastCollisionBox(),this._hadCollisionPreviousFrame=this.hasCollision(),this.setHasCollision(!1),this.setDirty(!1)},e.prototype._saveLastCollisionBox=function(){this._lastCollisionBoxX=this.getCollisionBoxX(),this._lastCollisionBoxY=this.getCollisionBoxY(),this._lastCollisionBoxWidth=this.getCollisionBoxWidth(),this._lastCollisionBoxHeight=this.getCollisionBoxHeight()},e.prototype.collidesWith=function(e){var t=this.getCollisionBoxX(),i=e.getCollisionBoxX(),o=this.getCollisionBoxWidth(),s=e.getCollisionBoxWidth(),a=this.getCollisionBoxY(),h=e.getCollisionBoxY(),l=this.getCollisionBoxHeight(),u=e.getCollisionBoxHeight(),p=t<i+s&&t+o>i&&a<h+u&&a+l>h;return!p||this.isHidden()||e.isHidden()||(this.notify(new n.Event(r.EventType.ELEMENT_COLLISION,{element1:this,element2:e})),e.notify(new n.Event(r.EventType.ELEMENT_COLLISION,{element1:e,element2:this}))),p},e.prototype.collidesWithCoordinates=function(e,t){return e>=this.getCollisionBoxX()&&e<=this.getCollisionBoxX()+this.getCollisionBoxWidth()&&t>=this.getCollisionBoxY()&&t<=this.getCollisionBoxY()+this.getCollisionBoxHeight()},e.prototype.collidesWithX=function(e){return e>=this.getCollisionBoxX()&&e<=this.getCollisionBoxX()+this.getCollisionBoxWidth()},e.prototype.collidesWithY=function(e){return e>=this.getCollisionBoxY()&&e<=this.getCollisionBoxY()+this.getCollisionBoxHeight()},e.prototype.getCollisionBoxX=function(){return this.hasRotation()?this.getRotatedScaledX()+e.AntiAliasCorrection.coordinateOffset:this.getScaledX()+e.AntiAliasCorrection.coordinateOffset},e.prototype.getCollisionBoxY=function(){return this.hasRotation()?this.getRotatedScaledY()+e.AntiAliasCorrection.coordinateOffset:this.getScaledY()+e.AntiAliasCorrection.coordinateOffset},e.prototype.getCollisionBoxWidth=function(){return this.hasRotation()?this.getScaledDiagonalSize()+e.AntiAliasCorrection.sizeAdjustment:this.getScaledWidth()+e.AntiAliasCorrection.sizeAdjustment},e.prototype.getCollisionBoxHeight=function(){return this.hasRotation()?this.getScaledDiagonalSize()+e.AntiAliasCorrection.sizeAdjustment:this.getScaledHeight()+e.AntiAliasCorrection.sizeAdjustment},e.prototype.handleMouseEvent=function(e){var t=this._setupSecondaryEventData(e),i=[];if(this.collidesWithCoordinates(e.data.viewOriginAdjustedX,e.data.viewOriginAdjustedY)){this.isMouseOver()||i.push(new o.SLGfxMouseEvent(r.EventType.MOUSE_ENTER_ELEMENT,t,e.data.time)),this._mouseIsOver=!0;var n=void 0;switch(e.type){case r.EventType.MOUSE_MOVE:n=r.EventType.MOUSE_MOVE_OVER_ELEMENT;break;case r.EventType.MOUSE_DOWN:n=r.EventType.MOUSE_DOWN_ON_ELEMENT;break;case r.EventType.MOUSE_UP:n=r.EventType.MOUSE_UP_ON_ELEMENT}i.push(new o.SLGfxMouseEvent(n,t,e.data.time))}else this.isMouseOver()&&(i.push(new o.SLGfxMouseEvent(r.EventType.MOUSE_EXIT_ELEMENT,t,e.data.time)),this._mouseIsOver=!1);for(var s=0;s<i.length;s++){var a=i[s];this.notify(a),a.endEventPropagation&&(e.endEventPropagation=!0)}},e.prototype._setupSecondaryEventData=function(e){return{x:e.data.x,y:e.data.y,viewOriginAdjustedX:e.data.viewOriginAdjustedX,viewOriginAdjustedY:e.data.viewOriginAdjustedY,rawX:e.data.rawX,rawY:e.data.rawY,element:this}},e.id=0,e.AntiAliasCorrection={coordinateOffset:-1,sizeAdjustment:2},e}();t.GfxElement=h},163:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GfxElementZIndexComparable=void 0;var i=function(){function e(e){this._parentElement=e}return e.prototype.getElement=function(){return this._parentElement},e.prototype.compareTo=function(e){return this._parentElement.getZIndex()<e._parentElement.getZIndex()?-1:this._parentElement.getZIndex()===e._parentElement.getZIndex()?0:1},e.prototype.equals=function(e){return this._parentElement.getZIndex()===e._parentElement.getZIndex()},e.prototype.getKey=function(){return this._parentElement.getId().toString()},e}();t.GfxElementZIndexComparable=i},531:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.GfxLayer=void 0;var r=i(57),s=i(555),a=i(857),h=function(e){function t(t){var i=e.call(this,t)||this;return i._elements=[],i._dirtyElements=new r.UniquePriorityQueue,i._dirtyElements.setInvertPriority(!1),i._removedElements={},i._zIndexCounter=0,i._allElementsRemoved=!1,i}return o(t,e),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!1,configurable:!0}),t.prototype.addElement=function(e){this._elements.push(e),-1===e.getZIndex()&&e.setZIndex(this._zIndexCounter++)},t.prototype.removeElementById=function(e){var t=this._elements.findIndex((function(t){return t.getId()===e}));return t>-1?this._removeElementByIndex(t):null},t.prototype.removeElement=function(e){return this.removeElementById(e.getId())},t.prototype._removeElementByIndex=function(e){this._removedElements[this._elements[e].getId()]=this._elements[e];var t=this._elements[e];return t.setDirty(!0),t.setHidden(!0),this._dirtyElements.push(t.getZIndexComparable()),t},t.prototype.removeAllElements=function(){for(var e=0;e<this._elements.length;e++)this._removeElementByIndex(e);this._allElementsRemoved=!0},t.prototype.update=function(e,t){for(var i=0;i<this._elements.length;i++)this.isDirty()&&this._elements[i].setDirty(!0),this._elements[i].update(e,t)&&this._dirtyElements.push(this._elements[i].getZIndexComparable()),this._checkBorderCollision(this._elements[i],e);this._handleCollisions()},t.prototype._checkBorderCollision=function(e,t){e.getCollisionBoxX()<=0&&e.notify(new r.Event(s.EventType.ELEMENT_HIT_LEFT_EDGE,{layer:this,element:e},t)),e.getCollisionBoxX()+e.getCollisionBoxWidth()>this.getWidth()&&e.notify(new r.Event(s.EventType.ELEMENT_HIT_RIGHT_EDGE,{layer:this,element:e},t)),e.getCollisionBoxY()<=0&&e.notify(new r.Event(s.EventType.ELEMENT_HIT_TOP_EDGE,{layer:this,element:e},t)),e.getCollisionBoxY()+e.getCollisionBoxHeight()>this.getHeight()&&e.notify(new r.Event(s.EventType.ELEMENT_HIT_BOTTOM_EDGE,{layer:this,element:e},t))},t.prototype._handleCollisions=function(){for(var e,t,i=0;i<this._elements.length-1;i++){e=this._elements[i];for(var n=i+1;n<this._elements.length;n++)t=this._elements[n],this._collisionCheckElementsIfNeeded(e,t)}},t.prototype._collisionCheckElementsIfNeeded=function(e,t){e.collidesWith(t)&&(this._updateElementOnCollision(e),this._updateElementOnCollision(t))},t.prototype._updateElementOnCollision=function(e){e.setHasCollision(!0),this._dirtyElements.push(e.getZIndexComparable())},t.prototype.preRender=function(e,t){if(a.Layer.prototype.preRender.call(this,e,t),!this.isDirty())for(var i=0;i<this._dirtyElements.size();i++)this._dirtyElements.getByIndex(i).getElement().clear(this.getCanvasContextWrapper())},t.prototype.render=function(e,t){for(;this._dirtyElements.peek();){var i=this._dirtyElements.pop().getElement();i.preRender(e,t)&&i.render(this.getCanvasContextWrapper(),e,t),i.postRender(e,t)}this._cleanUp()},t.prototype._cleanUp=function(){var e=this;this._allElementsRemoved?(this._elements=[],this._allElementsRemoved=!1):Object.keys(this._removedElements).forEach((function(t){var i=parseInt(t),n=e._elements.findIndex((function(e){return e.getId()===i}));e._elements.splice(n,1)})),this._removedElements={},this._dirtyElements.clear()},t.prototype.handleMouseEvent=function(e){for(var t=0;t<this._elements.length;t++)this._elements[t].handleMouseEvent(e)},t}(a.Layer);t.GfxLayer=h},883:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GfxPanel=void 0;var o=i(57),r=i(657),s=i(555),a=i(157),h=i(833),l=function(){function e(e){this._targetElement=e.targetElement,this._layerFactory=e.layerFactory||new a.LayerFactory,this._scaleX=e.scaleX||1,this._scaleY=e.scaleY||1,this._width=(e.width||640)*this._scaleX,this._height=(e.height||480)*this._scaleY,this._fpsElem=e.fpsElement||null,this._imageSmoothingEnabled=e.imageSmoothingEnabled||!1,this._last=0,this._mouseX=-1,this._mouseY=-1,this._mouseMoved=!1,this._paused=!1,this._unpaused=!1,this._useMouseMoveEvents=!!o.Utils.isNullOrUndefined(e.useMouseMoveEvents)||e.useMouseMoveEvents,this._backgroundColor=e.backgroundColor||"black",this._borderColor=e.borderColor||"grey",this._setBorderSize(e.borderSize||1),this._fpsMonitorArray=[],this._fpsMonitorIndex=0,this._viewOriginX=0,this._viewOriginY=0,this._pendingViewOriginX=null,this._pendingViewOriginY=null,this._layers=[],this._eventManager=e.eventManager||new o.EventManager,this._document=e.document||document,this._requestAnimationFrame=e.requestAnimationFrame||(window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(){}),this._prepareDiv(),this._setupEventListeners()}return e.prototype._setBorderSize=function(e){this._borderSize="number"==typeof e?e+"px":e},e.prototype.setViewOriginX=function(e){this._pendingViewOriginX=e,null!==this._pendingViewOriginX&&this._pendingViewOriginX!==this.getViewOriginX()&&this.getLayers().forEach((function(t){t.setViewOriginX(e)}))},e.prototype.setViewOriginY=function(e){this._pendingViewOriginY=e,null!==this._pendingViewOriginY&&this._pendingViewOriginY!==this.getViewOriginY()&&this.getLayers().forEach((function(t){t.setViewOriginY(e)}))},e.prototype.getViewOriginX=function(){return this._viewOriginX},e.prototype.getViewOriginY=function(){return this._viewOriginY},e.prototype.getPendingViewOriginX=function(){return this._pendingViewOriginX},e.prototype.getPendingViewOriginY=function(){return this._pendingViewOriginY},e.prototype._prepareDiv=function(){this._targetElement.style.width=this._width+"px",this._targetElement.style.height=this._height+"px",this._targetElement.style.backgroundColor=this._backgroundColor,this._targetElement.style.border=this._borderSize+" solid "+this._borderColor},e.prototype._setupEventListeners=function(){this._targetElement.addEventListener("mouseup",this._handleMouseEvent.bind(this),!0),this._targetElement.addEventListener("mousedown",this._handleMouseEvent.bind(this),!0),this._useMouseMoveEvents&&this._targetElement.addEventListener("mousemove",this.handleMouseMoveEvent.bind(this),!0),this._document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this),!1)},e.prototype._handleVisibilityChange=function(){this._tabNotVisible=this._document.hidden,this._tabNotVisible||this._paused||(this._unpaused=!0,this._requestAnimationFrame(this.render.bind(this)))},e.prototype.addEventListenerToDocument=function(e,t){this._document.addEventListener(e,t)},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,this._targetElement.style.backgroundColor=e},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setBorderColor=function(e){this._borderColor=e,this._targetElement.style.borderColor=e},e.prototype.getBorderColor=function(){return this._borderColor},e.prototype.setBorderSize=function(e){this._setBorderSize(e),this._targetElement.style.borderWidth=this._borderSize},e.prototype.getBorderSize=function(){return this._targetElement.style.borderWidth},e.prototype.getBorderTopSize=function(){return this._targetElement.style.borderTopWidth},e.prototype.getBorderLeftSize=function(){return this._targetElement.style.borderLeftWidth},e.prototype.getBorderRightSize=function(){return this._targetElement.style.borderRightWidth},e.prototype.getBorderBottomSize=function(){return this._targetElement.style.borderBottomWidth},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.getScaleX=function(){return this._scaleX},e.prototype.getScaleY=function(){return this._scaleY},e.prototype.getMouseX=function(){return this._mouseX},e.prototype.getMouseY=function(){return this._mouseY},e.prototype.isImageSmoothingEnabled=function(){return this._imageSmoothingEnabled},e.prototype.setImageSmoothingEnabled=function(e){this._imageSmoothingEnabled=e},e.prototype.createLayer=function(e,t){t=t||{};var i=this.createCanvasForLayer(),o=this.createCanvasContextWrapper(i),r=n({},t);r.width=r.width||this.getWidth(),r.height=r.height||this.getHeight(),r.canvasContextWrapper=o;var s=this._layerFactory.createLayer(e,r);return this.addLayer(s),s},e.prototype.createCanvasForLayer=function(){var e=this._document.createElement("CANVAS");return this._targetElement.appendChild(e),e.width=this._width,e.height=this._height,e.style.position="absolute",e},e.prototype.createCanvasContextWrapper=function(e){return new r.CanvasContextWrapper({canvasContext:e.getContext("2d"),imageSmoothingEnabled:this._imageSmoothingEnabled,width:this._width,height:this._height})},e.prototype.addLayer=function(e){this._layers.push(e)},e.prototype.getLayers=function(){return this._layers},e.prototype.setPaused=function(e){this._paused&&!e&&(this._unpaused=!0),this._paused=e,this._eventManager.notify(new o.Event(this._paused?s.EventType.SCREEN_PAUSED:s.EventType.SCREEN_RESUMED,{})),this._paused||this._requestAnimationFrame(this.render.bind(this))},e.prototype.onNextFrameBegin=function(e){this._eventManager.on(s.EventType.NEXT_FRAME_BEGIN,e)},e.prototype.onNextFrameEnd=function(e){this._eventManager.on(s.EventType.NEXT_FRAME_END,e)},e.prototype._doBeforeRenderEvents=function(e,t){this._eventManager.notify(new o.Event(s.EventType.NEXT_FRAME_BEGIN,{diff:t},e)),this._eventManager.clearEventListeners(s.EventType.NEXT_FRAME_BEGIN),this._eventManager.notify(new o.Event(s.EventType.BEFORE_RENDER,{diff:t},e))},e.prototype._doAfterRenderEvents=function(e,t){this._eventManager.notify(new o.Event(s.EventType.NEXT_FRAME_END,{diff:t},e)),this._eventManager.clearEventListeners(s.EventType.NEXT_FRAME_END),this._eventManager.notify(new o.Event(s.EventType.AFTER_RENDER,{diff:t},e))},e.prototype.isPaused=function(){return this._paused},e.prototype.render=function(e){if(e=e||1,!this._paused&&!this._tabNotVisible){this._unpaused&&(this._unpaused=!1,this._last=Math.floor(e)-1),e=Math.floor(e);var t=Date.now(),i=e-this._last;this._last=e,this._mouseMoved&&this._handleMouseMoveEvent(e),this._doBeforeRenderEvents(e,i),this._updateFps(i),this._update(e,i),this._render(e,i),this._updateViewOrigins(),this._doAfterRenderEvents(e,i),t=Date.now()-t,this._fpsElem&&0===this._fpsMonitorIndex&&(this._fpsElem.innerHTML+="<br />Avg MS per frame: "+t),this._requestAnimationFrame(this.render.bind(this))}},e.prototype._updateViewOrigins=function(){o.Utils.isNullOrUndefined(this.getPendingViewOriginX())||(this._viewOriginX=this.getPendingViewOriginX(),this._pendingViewOriginX=null),o.Utils.isNullOrUndefined(this.getPendingViewOriginY())||(this._viewOriginY=this.getPendingViewOriginY(),this._pendingViewOriginY=null)},e.prototype._handleMouseMoveEvent=function(e){var t=this._getDataForMouseEvent(this._mouseX,this._mouseY),i=new h.SLGfxMouseEvent(s.EventType.MOUSE_MOVE,t,e);this._propagateMouseEventThroughLayers(i),i.endEventPropagation||this._eventManager.notify(i),this._mouseMoved=!1},e.prototype._updateFps=function(e){if(this._fpsElem){var t=Math.floor(1e3/e);this._fpsMonitorArray.length<30?this._fpsMonitorArray.push(t):this._fpsMonitorArray[this._fpsMonitorIndex]=t,this._fpsMonitorIndex++,this._fpsMonitorIndex>=30&&(this._fpsMonitorIndex=0);for(var i=1,n=0;n<this._fpsMonitorArray.length;n++)i+=this._fpsMonitorArray[n]/30;this._fpsElem&&0===this._fpsMonitorIndex&&(this._fpsElem.innerHTML="fps: "+Math.floor(i))}},e.prototype._update=function(e,t){for(var i=0;i<this._layers.length;i++)this._layers[i].update(e,t)},e.prototype._render=function(e,t){for(var i=0;i<this._layers.length;i++)this._layers[i].preRender(e,t),this._layers[i].render(e,t),this._layers[i].postRender(e,t)},e.prototype.handleMouseMoveEvent=function(e){if(this._paused)return!1;this._mouseMoved=!0;var t=this.getXFromMouseEvent(e),i=this.getYFromMouseEvent(e);if(t<0||t>=this._width||i<0||i>=this._height)return this._mouseX=-1,this._mouseY=-1,!1;this._mouseX=t,this._mouseY=i},e.prototype._getDataForMouseEvent=function(e,t){var i=this.getViewOriginAdjustedX(e),n=this.getViewOriginAdjustedY(t);return{x:this.getUnScaledX(i),y:this.getUnScaledY(n),viewOriginAdjustedX:i,viewOriginAdjustedY:n,rawX:e,rawY:t}},e.prototype._handleMouseEvent=function(e){if(this._paused)return!1;var t=this.getXFromMouseEvent(e),i=this.getYFromMouseEvent(e);if(t<0||t>=this._width||i<0||i>=this._height)return!1;var n=this._getDataForMouseEvent(t,i),o="mouseup"===e.type?s.EventType.MOUSE_UP:s.EventType.MOUSE_DOWN,r=new h.SLGfxMouseEvent(o,n);return this._propagateMouseEventThroughLayers(r),r.endEventPropagation||this._eventManager.notify(r),1!==e.button&&void 0},e.prototype._propagateMouseEventThroughLayers=function(e){for(var t=this._layers.length-1;t>=0;t--){if(e.endEventPropagation)return;this._layers[t].handleMouseEvent(e)}},e.prototype.getXFromMouseEvent=function(e){return e.pageX-(this._targetElement.offsetLeft+parseInt(this.getBorderLeftSize()))},e.prototype.getYFromMouseEvent=function(e){return e.pageY-(this._targetElement.offsetTop+parseInt(this.getBorderTopSize()))},e.prototype.getUnScaledX=function(e){return Math.floor(e/this.getScaleX())},e.prototype.getUnScaledY=function(e){return Math.floor(e/this.getScaleY())},e.prototype.getViewOriginAdjustedX=function(e){return e-this.getViewOriginX()},e.prototype.getViewOriginAdjustedY=function(e){return e-this.getViewOriginY()},e.prototype.setBorder=function(e,t,i){this._targetElement.style.borderWidth=e,this._targetElement.style.borderStyle=t,this._targetElement.style.borderColor=i},e.prototype.addEventListener=function(e,t,i){return this._eventManager.addEventListener(e,t,i)},e.prototype.on=function(e,t,i){return this.addEventListener(e,t,i)},e.prototype.removeEventListener=function(e){this._eventManager.removeEventListener(e)},e.prototype.clearEventListeners=function(e){this._eventManager.clearEventListeners(e)},e.prototype.notify=function(e,t,i){e instanceof o.Event?this._eventManager.notify(e):this._eventManager.notify(e,t,i)},e}();t.GfxPanel=l},612:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ImageElement=void 0;var r=function(e){function t(t){var i=e.call(this,t)||this;return i._image=t.image,i._sx=t.sourceX,i._sy=t.sourceY,i._sWidth=t.sourceWidth,i._sHeight=t.sourceHeight,i._imageRenderer=t.imageRenderer,i}return o(t,e),t.prototype.getImage=function(){return this._image},t.prototype.getWidth=function(){return this._sWidth},t.prototype.getHeight=function(){return this._sHeight},t.prototype.getSourceX=function(){return this._sx},t.prototype.getSourceY=function(){return this._sy},t.prototype.getSourceWidth=function(){return this._sWidth},t.prototype.getSourceHeight=function(){return this._sHeight},t.prototype.render=function(e,t,i){this._imageRenderer.renderImage(e,this.getImage(),this.getSourceX(),this.getSourceY(),this.getSourceWidth(),this.getSourceHeight(),this.getX(),this.getY(),this.getWidth(),this.getHeight(),this.getElementScaleX(),this.getElementScaleY(),this.isHorizontallyFlipped(),this.isVerticallyFlipped(),this.getRotation())},t}(i(388).GfxElement);t.ImageElement=r},158:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImageLoader=void 0;var i=function(){function e(){}return e.prototype.loadImages=function(e,t,i){var n=this,o=(Object.keys(e).length,{}),r=function(r){o[r]=new Image,o[r].src=e[r],o[r].onload=function(){return n.loadImagesCallback(r,o,t,i)}};for(var s in e)r(s)},e.prototype.loadImagesCallback=function(e,t,i,n){var o=Object.entries(t).filter((function(e){return e[1].complete})).map((function(e){return e[0]})),r=o.length,s=Object.keys(t).length;n&&n({lastLoadedImageKey:e,loadedCount:r,totalImageCount:s,loadedImageKeys:o}),r===s&&i(t)},e}();t.ImageLoader=i},788:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImageRenderer=void 0;var n=i(675),o=function(){function e(e,t){void 0===e&&(e=1),void 0===t&&(t=1),this._screenScaleX=e,this._screenScaleY=t}return e.prototype.renderImage=function(e,t,i,n,o,r,s,a,h,l,u,p,c,_,d){c||_||d?this.renderImageWithTranslation(e,t,i,n,o,r,s,a,h,l,u,p,c,_,d):e.drawImage(t,i,n,o,r,s*this.getScreenScaleX(),a*this.getScreenScaleY(),h*this.getTotalScaleX(u),l*this.getTotalScaleY(p))},e.prototype.renderImageWithTranslation=function(e,t,i,o,r,s,a,h,l,u,p,c,_,d,f){var g=this,y=a*this.getScreenScaleX()+l*this.getTotalScaleX(p)/2,v=h*this.getScreenScaleY()+u*this.getTotalScaleY(c)/2;n.Utils.renderWithTranslation(e,y,v,_,d,f,(function(){e.drawImageWithTranslation(t,i,o,r,s,0-l*g.getTotalScaleX(p)/2,0-u*g.getTotalScaleY(c)/2,l*g.getTotalScaleX(p),u*g.getTotalScaleY(c))}))},e.prototype.getScreenScaleX=function(){return this._screenScaleX},e.prototype.getScreenScaleY=function(){return this._screenScaleY},e.prototype.getTotalScaleX=function(e){return this._screenScaleX*e},e.prototype.getTotalScaleY=function(e){return this._screenScaleY*e},e}();t.ImageRenderer=o},701:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSprite=void 0;var r=function(e){function t(t){var i=e.call(this,t)||this;return i._image=t.image,i._sWidth=t.width,i._sHeight=t.height,i._imageRenderer=t.imageRenderer,i}return o(t,e),t.prototype.getImage=function(){return this._image},t.prototype.renderFrame=function(e,t,i,n){this._imageRenderer.renderImage(e,this.getImage(),n.getSourceX(),n.getSourceY(),n.getSourceWidth(),n.getSourceHeight(),this.getX(),this.getY(),this.getWidth(),this.getHeight(),this.getElementScaleX(),this.getElementScaleY(),this.isHorizontallyFlipped(),this.isVerticallyFlipped(),this.getRotation())},t.prototype.getWidth=function(){return this._sWidth},t.prototype.getHeight=function(){return this._sHeight},t}(i(653).Sprite);t.ImageSprite=r},151:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSpriteFrame=void 0;var i=function(){function e(e){this._duration=e.duration,this._sx=e.sourceX,this._sy=e.sourceY,this._sWidth=e.sourceWidth,this._sHeight=e.sourceHeight}return e.prototype.getDuration=function(){return this._duration},e.prototype.getSourceX=function(){return this._sx},e.prototype.getSourceY=function(){return this._sy},e.prototype.getSourceWidth=function(){return this._sWidth},e.prototype.getSourceHeight=function(){return this._sHeight},e}();t.ImageSpriteFrame=i},857:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;var n=i(57),o=function(){function e(e){this._width=e.width||320,this._height=e.height||200,this._canvasContextWrapper=e.canvasContextWrapper,this._dirty=!0,this._pendingViewOriginX=null,this._pendingViewOriginY=null}return e.prototype.isDirty=function(){return this._dirty},e.prototype.setDirty=function(e){this._dirty=e},e.prototype.setViewOriginX=function(e){this._pendingViewOriginX=e,null!==this._pendingViewOriginX&&this._pendingViewOriginX!==this.getViewOriginX()&&this.setDirty(!0)},e.prototype.setViewOriginY=function(e){this._pendingViewOriginY=e,null!==this._pendingViewOriginY&&this._pendingViewOriginY!==this.getViewOriginY()&&this.setDirty(!0)},e.prototype.getViewOriginX=function(){return this._canvasContextWrapper.getViewOriginX()},e.prototype.getViewOriginY=function(){return this._canvasContextWrapper.getViewOriginY()},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.getCanvasContextWrapper=function(){return this._canvasContextWrapper},e.prototype.isImageSmoothingEnabled=function(){return this._canvasContextWrapper.isImageSmoothingEnabled()},e.prototype.setImageSmoothingEnabled=function(e){this._canvasContextWrapper.setImageSmoothingEnabled(e),this.setDirty(!0)},e.prototype.preRender=function(e,t){this.isDirty()&&this.getCanvasContextWrapper().clear(),n.Utils.isNullOrUndefined(this._pendingViewOriginX)||(this.getCanvasContextWrapper().setViewOriginX(this._pendingViewOriginX),this._pendingViewOriginX=null),n.Utils.isNullOrUndefined(this._pendingViewOriginY)||(this.getCanvasContextWrapper().setViewOriginY(this._pendingViewOriginY),this._pendingViewOriginY=null)},e.prototype.postRender=function(e,t){this.setDirty(!1)},e.prototype.clearLayer=function(){this._canvasContextWrapper.clearRect(0,0,this.getWidth(),this.getHeight())},e.prototype.dimLayer=function(e,t,i){var n=e/t;setTimeout(this._dimStep.bind(this,n,n,t,i),i)},e.prototype._dimStep=function(e,t,i,n){var o=this.getCanvasContextWrapper();o.clearRect(0,0,this.getWidth(),this.getHeight()),o.setFillStyle("rgba(0,0,0,".concat(e,")")),o.fillRect(0,0,this.getWidth(),this.getHeight()),i>0&&setTimeout(this._dimStep.bind(this,e+t,t,i-1,n),n)},e}();t.Layer=o},157:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LayerFactory=void 0;var n=i(57),o=i(493),r=i(531),s=function(){function e(t){var i=this;t=t||{},this._registeredTypes={},Object.keys(e.DefaultTypes).forEach((function(t){i._registeredTypes[t]=e.DefaultTypes[t]})),Object.keys(t).forEach((function(e){i._registeredTypes[e]=t[e]}))}return e.prototype.createLayer=function(e,t){var i,o=this._registeredTypes[e];return o&&n.Utils.isFunction(o)&&(i=o(t)),i},e.DefaultTypes={GfxLayer:function(e){return new r.GfxLayer(e)},BackgroundLayer:function(e){return new o.BackgroundLayer(e)}},e}();t.LayerFactory=s},438:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MoveOrder=void 0;var n=i(57),o=function(){function e(e,t,i,n,o,r){this._element=e,this._tx=t,this._ty=i,this._startX=0,this._startY=0,this._duration=n,this._timeElapsed=0,this._elementCallback=o,this._callback=r,this._end=!1,this._started=!1}return e.prototype.start=function(){this._startX=this._element.getX(),this._startY=this._element.getY(),this._started=!0},e.prototype.update=function(e){if(this._started&&!this._end){this._timeElapsed+=e;var t=this._timeElapsed/this._duration;t>=1?this.end():(this._element.setX(this._startX+(this._tx-this._startX)*t),this._element.setY(this._startY+(this._ty-this._startY)*t))}},e.prototype.end=function(){this._end=!0,this._element.setX(this._tx),this._element.setY(this._ty),n.Utils.isFunction(this._elementCallback)&&this._elementCallback(),n.Utils.isFunction(this._callback)&&this._callback(this._element)},e}();t.MoveOrder=o},833:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.SLGfxMouseEvent=void 0;var r=function(e){function t(t,i,n){var o=e.call(this,t,i,n)||this;return o.endEventPropagation=!1,o}return o(t,e),t}(i(57).Event);t.SLGfxMouseEvent=r},653:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;var r=i(555),s=i(388),a=i(57),h=function(e){function t(t){var i=e.call(this,t)||this;return i._frames=t.frames||[],i._ttl=t.ttl||-1,i._loop=!1!==t.loop,i._loopsToLive=t.loopsToLive||-1,i._freezeFrameIdx=t.freezeFrameIdx||-1,i._fidx=0,i._currentFrameElapsed=0,i._done=!1,i._loopCount=0,i._elapsed=0,i}return o(t,e),t.prototype.getFrames=function(){return this._frames},t.prototype.setFrames=function(e){this._frames=e},t.prototype.addFrame=function(e){this._frames.push(e)},t.prototype.getTtl=function(){return this._ttl},t.prototype.setTtl=function(e){this._ttl=e},t.prototype.doesLoop=function(){return this._loop},t.prototype.setDoLoop=function(e){this._loop=e},t.prototype.getLoopsToLive=function(){return this._loopsToLive},t.prototype.setLoopsToLive=function(e){this._loopsToLive=e},t.prototype.isDone=function(){return this._done},t.prototype.setDone=function(e){this._done=e,e&&this.doEndOfAnimation()},t.prototype.getFreezeFrameIndex=function(){return this._freezeFrameIdx},t.prototype.setFreezeFrameIndex=function(e){this._freezeFrameIdx=e},t.prototype.getLoopCount=function(){return this._loopCount},t.prototype.getCurrentFrameIndex=function(){return this._fidx},t.prototype.setCurrentFrameIndex=function(e){this._fidx=e,this.setDirty(!0)},t.prototype.reset=function(){this.setCurrentFrameIndex(0),this._currentFrameElapsed=0,this._done=!1,this._loopCount=0,this._elapsed=0,this.setDirty(!0)},t.prototype.update=function(e,t){return s.GfxElement.prototype.update.call(this,e,t),0===this._frames.length||this._done?null:(this._updateTtl(t),this._updateFrame(t),this._done&&this.doEndOfAnimation(),this.isDirty()?this:null)},t.prototype._updateFrame=function(e){if(this._currentFrameElapsed+=e,this._currentFrameElapsed>=this._frames[this._fidx].getDuration()){for(;this._currentFrameElapsed>=this._frames[this._fidx].getDuration();)this._currentFrameElapsed-=this._frames[this._fidx].getDuration(),this._fidx++,this._fidx===this._frames.length&&(this._fidx=0,this._loopCount++,this._loop?this._loopsToLive>-1&&this._loopCount>=this._loopsToLive&&(this._done=!0):(this._done=!0,this._freezeFrameIdx>-1&&(this._fidx=this._freezeFrameIdx)));this.setDirty(!0)}},t.prototype._updateTtl=function(e){this._ttl>-1&&(this._elapsed+=e,this._elapsed>=this._ttl&&(this._done=!0))},t.prototype.render=function(e,t,i){this.renderFrame(e,t,i,this._frames[this._fidx])},t.prototype.doEndOfAnimation=function(){var e=new a.Event(r.EventType.SPRITE_ANIMATION_DONE,{element:this});this.notify(e)},t}(s.GfxElement);t.Sprite=h},675:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.renderWithTranslation=function(e,i,n,o,r,s,a){e.save(),t.translateCanvasContext(e,i,n,o,r,s),a(),e.restore()},t.translateCanvasContext=function(e,t,i,n,o,r){e.translate(t,i),(n||o)&&e.scale(n?-1:1,o?-1:1),r&&e.rotate(r)},t.prototype.clearCanvasContext=function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},t}(i(57).Utils);t.Utils=r},654:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GnomeDemo=void 0;var n=i(57),o=i(788),r=i(883),s=i(158),a=i(151),h=i(701),l=i(799),u=function(){function e(e){var t=this;this._gnomeImage=l,this._increment=1,this._panel=new r.GfxPanel({targetElement:e.targetElement,backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderSize:e.borderSize,scaleX:e.scaleX,scaleY:e.scaleY,fpsElement:e.fpsElement}),this._gfxLayer=this._panel.createLayer("GfxLayer"),this._panel.render(),(new s.ImageLoader).loadImages({gnome:l},(function(e){t.initialize(e.gnome)}))}return e.prototype.initialize=function(e){var t=this,i=new o.ImageRenderer,r=new a.ImageSpriteFrame({duration:200,sourceX:4,sourceY:0,sourceWidth:24,sourceHeight:32}),s=new a.ImageSpriteFrame({duration:200,sourceX:70,sourceY:0,sourceWidth:24,sourceHeight:32}),l=new h.ImageSprite({gfxPanel:this._panel,image:e,x:200,y:100,width:24,height:32,scaleX:2,scaleY:2,verticalFlip:Math.random()>.5,horizontalFlip:Math.random()>.5,rotation:n.Utils.degreesToRadians(Math.floor(180*Math.random())),imageRenderer:i});l.addFrame(r),l.addFrame(s),this._gfxLayer.addElement(l);for(var u=function(t){var o=new h.ImageSprite({gfxPanel:p._panel,image:e,x:Math.floor(640*Math.random()),y:Math.floor(480*Math.random()),width:24,height:32,scaleX:Math.random()>.5?2:1,scaleY:Math.random()>.5?2:1,verticalFlip:Math.random()>.5,horizontalFlip:Math.random()>.5,rotation:n.Utils.degreesToRadians(Math.floor(180*Math.random())),imageRenderer:i});o.addFrame(r),o.addFrame(s),p._gfxLayer.addElement(o),setInterval((function(){o.setRotation(o.getRotation()+.02)}),20)},p=this,c=0;c<40;c++)u();var _=new h.ImageSprite({gfxPanel:this._panel,image:e,x:100,y:100,width:24,height:32,scaleX:2,scaleY:2,imageRenderer:i});_.addFrame(r),_.addFrame(s),this._gfxLayer.addElement(_),setInterval((function(){return t.updateLayer()}),32)},e.prototype.togglePause=function(){this._panel.setPaused(!this._panel.isPaused())},e.prototype.updateLayer=function(){this._gfxLayer.setViewOriginX(this._gfxLayer.getViewOriginX()+this._increment),this._gfxLayer.getViewOriginX()<-640&&(this._increment=1),this._gfxLayer.getViewOriginX()>640&&(this._increment=-1)},e}();t.GnomeDemo=u},840:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleDemo=void 0;var n=i(788),o=i(883),r=i(158),s=i(151),a=i(701),h=i(936),l=function(){function e(e){var t=this;this._panel=new o.GfxPanel({targetElement:e.targetDiv,backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderSize:e.borderSize,scaleX:e.scaleX,scaleY:e.scaleY,fpsElement:e.fpsElem}),this._gfxLayer=this._panel.createLayer("GfxLayer"),this._panel.render(),(new r.ImageLoader).loadImages({blueBall:h},(function(e){t.initialize(e.blueBall)}))}return e.prototype.initialize=function(e){var t=new n.ImageRenderer,i={gfxPanel:this._panel,image:e,scaleX:2,scaleY:2,width:32,height:32,imageRenderer:t,x:100,y:100,frames:[new s.ImageSpriteFrame({duration:2500,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32}),new s.ImageSpriteFrame({duration:200,sourceX:32,sourceY:0,sourceWidth:32,sourceHeight:32})]};this._elementFront=new a.ImageSprite(i),this._gfxLayer.addElement(this._elementFront);var o={gfxPanel:this._panel,image:e,scaleX:2,scaleY:2,width:32,height:32,imageRenderer:t,x:500,y:100,hidden:!0,frames:[new s.ImageSpriteFrame({duration:2500,sourceX:128,sourceY:0,sourceWidth:32,sourceHeight:32}),new s.ImageSpriteFrame({duration:200,sourceX:160,sourceY:0,sourceWidth:32,sourceHeight:32})]};this._elementLeft=new a.ImageSprite(o),this._gfxLayer.addElement(this._elementLeft);var r={gfxPanel:this._panel,image:e,scaleX:2,scaleY:2,width:32,height:32,imageRenderer:t,x:500,y:300,hidden:!0,frames:[new s.ImageSpriteFrame({duration:2500,sourceX:192,sourceY:0,sourceWidth:32,sourceHeight:32})]};this._elementBack=new a.ImageSprite(r),this._gfxLayer.addElement(this._elementBack);var h={gfxPanel:this._panel,image:e,scaleX:2,scaleY:2,width:32,height:32,imageRenderer:t,x:100,y:300,hidden:!0,frames:[new s.ImageSpriteFrame({duration:2500,sourceX:64,sourceY:0,sourceWidth:32,sourceHeight:32}),new s.ImageSpriteFrame({duration:200,sourceX:96,sourceY:0,sourceWidth:32,sourceHeight:32})]};this._elementRight=new a.ImageSprite(h),this._gfxLayer.addElement(this._elementRight),this._elementFront.on("ELEMENT_STOPPED_MOVING",this.moveEast.bind(this)),this._elementRight.on("ELEMENT_STOPPED_MOVING",this.moveNorth.bind(this)),this._elementBack.on("ELEMENT_STOPPED_MOVING",this.moveWest.bind(this)),this._elementLeft.on("ELEMENT_STOPPED_MOVING",this.moveSouth.bind(this)),this.moveSouth()},e.prototype.moveSouth=function(){this._elementLeft.hide(),this._elementFront.setX(100),this._elementFront.setY(100),this._elementFront.show(),this._elementFront.moveTo(100,300,4e3)},e.prototype.moveEast=function(){this._elementFront.hide(),this._elementRight.setX(100),this._elementRight.setY(300),this._elementRight.show(),this._elementRight.moveTo(500,300,6e3)},e.prototype.moveNorth=function(){this._elementRight.hide(),this._elementBack.setX(500),this._elementBack.setY(300),this._elementBack.show(),this._elementBack.moveTo(500,100,4e3)},e.prototype.moveWest=function(){this._elementBack.hide(),this._elementLeft.setX(500),this._elementLeft.setY(100),this._elementLeft.show(),this._elementLeft.moveTo(100,100,6e3)},e.prototype.togglePause=function(){this._panel.setPaused(!this._panel.isPaused())},e}();t.SimpleDemo=l},123:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.createLayer("GfxLayer"),t.render()}},742:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,r=new n.ImageElement({gfxPanel:e,image:t.gnome,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32,scaleX:2,scaleY:2,imageRenderer:o});i.addElement(r)}(t,e)}))}},344:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);function r(e){e.setX(0),e.setY(0),e.moveTo(32,32,5e3,(function(){return r(e)}))}t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,s=new n.ImageElement({gfxPanel:e,image:t.gnome,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32,scaleX:2,scaleY:2,imageRenderer:o});i.addElement(s),r(s)}(t,e)}))}},369:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,r=new n.ImageSprite({gfxPanel:e,image:t.gnome,width:32,height:32,scaleX:2,scaleY:2,imageRenderer:o,frames:[new n.ImageSpriteFrame({duration:350,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32}),new n.ImageSpriteFrame({duration:350,sourceX:64,sourceY:0,sourceWidth:32,sourceHeight:32})]});i.addElement(r)}(t,e)}))}},65:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,r=new n.ImageSprite({gfxPanel:e,image:t.gnome,width:32,height:32,scaleX:2,scaleY:2,imageRenderer:o,frames:[new n.ImageSpriteFrame({duration:350,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32}),new n.ImageSpriteFrame({duration:350,sourceX:64,sourceY:0,sourceWidth:32,sourceHeight:32})]});i.addElement(r),r.setHorizontallyFlipped(!0)}(t,e)}))}},139:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,r=new n.ImageSprite({gfxPanel:e,image:t.gnome,width:32,height:32,scaleX:2,scaleY:2,imageRenderer:o,frames:[new n.ImageSpriteFrame({duration:350,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32}),new n.ImageSpriteFrame({duration:350,sourceX:64,sourceY:0,sourceWidth:32,sourceHeight:32})]});i.addElement(r),e.on(n.EventType.BEFORE_RENDER,(function(e){var t=e.time/10%360;r.setRotation(n.Utils.degreesToRadians(t))}))}(t,e)}))}},929:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=i(607),o=i(799);t.initialize=function(e){var t=new n.GfxPanel({targetElement:e,width:128,height:96});t.render(),(new n.ImageLoader).loadImages({gnome:o},(function(e){!function(e,t){var i=e.createLayer("GfxLayer"),o=new n.ImageRenderer,r=new n.ImageSprite({gfxPanel:e,image:t.gnome,width:32,height:32,scaleX:2,scaleY:2,imageRenderer:o,frames:[new n.ImageSpriteFrame({duration:350,sourceX:0,sourceY:0,sourceWidth:32,sourceHeight:32}),new n.ImageSpriteFrame({duration:350,sourceX:64,sourceY:0,sourceWidth:32,sourceHeight:32})]});i.addElement(r);var s=!1;r.on(n.EventType.MOUSE_UP_ON_ELEMENT,(function(){s||(s=!0,r.shake(20,2,50,0,3e3,(function(){s=!1})))}))}(t,e)}))}},221:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialIndex=void 0;var n=i(123),o=i(742),r=i(344),s=i(369),a=i(65),h=i(139),l=i(929);t.TutorialIndex={renderTutorial1:n.initialize,renderTutorial2:o.initialize,renderTutorial3:r.initialize,renderTutorial4:s.initialize,renderTutorial5:a.initialize,renderTutorial6:h.initialize,renderTutorial7:l.initialize}},607:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=t.Sprite=t.SLGfxMouseEvent=t.GfxPanel=t.MoveOrder=t.LayerFactory=t.Layer=t.ImageSpriteFrame=t.ImageSprite=t.ImageRenderer=t.ImageLoader=t.ImageElement=t.GfxLayer=t.GfxElementZIndexComparable=t.GfxElement=t.EventType=t.CanvasContextWrapper=t.BackgroundLayer=void 0;var n=i(493);Object.defineProperty(t,"BackgroundLayer",{enumerable:!0,get:function(){return n.BackgroundLayer}});var o=i(657);Object.defineProperty(t,"CanvasContextWrapper",{enumerable:!0,get:function(){return o.CanvasContextWrapper}});var r=i(555);Object.defineProperty(t,"EventType",{enumerable:!0,get:function(){return r.EventType}});var s=i(388);Object.defineProperty(t,"GfxElement",{enumerable:!0,get:function(){return s.GfxElement}});var a=i(163);Object.defineProperty(t,"GfxElementZIndexComparable",{enumerable:!0,get:function(){return a.GfxElementZIndexComparable}});var h=i(531);Object.defineProperty(t,"GfxLayer",{enumerable:!0,get:function(){return h.GfxLayer}});var l=i(612);Object.defineProperty(t,"ImageElement",{enumerable:!0,get:function(){return l.ImageElement}});var u=i(158);Object.defineProperty(t,"ImageLoader",{enumerable:!0,get:function(){return u.ImageLoader}});var p=i(788);Object.defineProperty(t,"ImageRenderer",{enumerable:!0,get:function(){return p.ImageRenderer}});var c=i(701);Object.defineProperty(t,"ImageSprite",{enumerable:!0,get:function(){return c.ImageSprite}});var _=i(151);Object.defineProperty(t,"ImageSpriteFrame",{enumerable:!0,get:function(){return _.ImageSpriteFrame}});var d=i(857);Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return d.Layer}});var f=i(157);Object.defineProperty(t,"LayerFactory",{enumerable:!0,get:function(){return f.LayerFactory}});var g=i(438);Object.defineProperty(t,"MoveOrder",{enumerable:!0,get:function(){return g.MoveOrder}});var y=i(883);Object.defineProperty(t,"GfxPanel",{enumerable:!0,get:function(){return y.GfxPanel}});var v=i(833);Object.defineProperty(t,"SLGfxMouseEvent",{enumerable:!0,get:function(){return v.SLGfxMouseEvent}});var m=i(653);Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return m.Sprite}});var E=i(675);Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return E.Utils}})},799:(e,t,i)=>{e.exports=i.p+"77d9a68014942462137c.png"},936:(e,t,i)=>{e.exports=i.p+"9fd1b71ced8a7c817ee8.png"}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})();var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.TutorialIndex=e.GnomeDemo=e.SimpleDemo=void 0;var t=i(840);Object.defineProperty(e,"SimpleDemo",{enumerable:!0,get:function(){return t.SimpleDemo}});var o=i(654);Object.defineProperty(e,"GnomeDemo",{enumerable:!0,get:function(){return o.GnomeDemo}});var r=i(221);Object.defineProperty(e,"TutorialIndex",{enumerable:!0,get:function(){return r.TutorialIndex}})})(),n})()}));